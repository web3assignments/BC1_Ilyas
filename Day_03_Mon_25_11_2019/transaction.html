<body>
    Latest Block Id: <p id="logBlockId"></p>
  
    <script>
      /**
       * INFURA_URL is the URL to the main network of Infura to fetch
       * information from.
       */
      const INFURA_URL = 'https://mainnet.infura.io';

      /**
       * JSON_RPC_VERSION is the version of the JSON RPC implementation
       * to use whilst sending requests.
       */
      const JSON_RPC_VERSION = '2.0'

      /**
       * REQ_LATEST_BLOCK_NO is the name of the RPC request to fetch the
       * latest block number in the network.
       */
      const REQ_LATEST_BLOCK_NO = "eth_blockNumber"

      /**
       * fetchAndPresentLatestBlockId calls `fetchLatestBlockId` and
       * forwards the result to `presentBlockId`.
       */
      async function fetchAndPresentLatestBlockId() {
        latestBlock = await fetchLatestBlockId();
        latestBlockId = parseInt(latestBlock.result);

        presentBlockId(latestBlockId);        
      }

      /**
       * presentBlockId alters an element within the document to show
       * the given block id.
       */
      function presentBlockId(blockId) {
        document.getElementById("logBlockId").innerHTML += blockId + "\n";
      }
  
      /**
       * fetchLatestBlockId dispatches a request to infura.io to fetch the latest
       * block id.
       */
      async function fetchLatestBlockId() {
        const request = JSON.stringify(generateBlockIdRequest(1));
        const response = await fetch(INFURA_URL, {
          method: 'POST',
          headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
          },
          body: request
        });
  
        return await response.json();
      }
  
      /**
       * generateBlockIdRequest generates a HTTP request to obtain the specified block
       * within the Ethereum network.
       */
      function generateBlockIdRequest(id) {
        return {
          "jsonrpc": JSON_RPC_VERSION,
          "method": REQ_LATEST_BLOCK_NO,
          "params": [],
          "id": id
        }
      }
  
      fetchAndPresentLatestBlockId();
    </script>
  </body>